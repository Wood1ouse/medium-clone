(this["webpackJsonphooks-course"]=this["webpackJsonphooks-course"]||[]).push([[0],{57:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(26),r=c.n(a),i=c(5),l=c(2),o=c(0),j=Object(n.createContext)([{},function(){}]),b=function(e){var t=e.children,c=Object(n.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),s=Object(l.a)(c,2),a=s[0],r=s[1];return Object(o.jsx)(j.Provider,{value:[a,r],children:t})},u=c(10),d=c(27),O=c.n(d),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(n.useState)((function(){return localStorage.getItem(e)||t})),s=Object(l.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){localStorage.setItem(e,a)}),[a,e]),[a,r]},h=function(e){var t=Object(n.useState)(null),c=Object(l.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],j=i[1],b=Object(n.useState)(null),d=Object(l.a)(b,2),h=d[0],x=d[1],g=Object(n.useState)({}),p=Object(l.a)(g,2),f=p[0],v=p[1],N=m("token"),k=Object(l.a)(N,1)[0],S=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(e),j(!0)}),[]);return Object(n.useEffect)((function(){var t=Object(u.a)(Object(u.a)({},f),{headers:{authorization:k?"Token ".concat(k):""}});o&&O()("https://conduit.productionready.io/api"+e,t).then((function(e){j(!1),a(e.data)})).catch((function(e){j(!1),x(e.response.data)}))}),[o,f,k,e]),[{isLoading:o,response:s,error:h},S]},x=function(e){var t=e.children,c=h("/user"),s=Object(l.a)(c,2),a=s[0].response,r=s[1],i=Object(n.useContext)(j),o=Object(l.a)(i,2)[1],b=m("token"),d=Object(l.a)(b,1)[0];return Object(n.useEffect)((function(){r(),d||o((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!1})}))}),[d,o,r]),Object(n.useEffect)((function(){a&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!1,currentUser:a.user})}))}),[a,o]),t},g=function(){var e=Object(n.useContext)(j),t=Object(l.a)(e,1)[0];return console.log(t),Object(o.jsx)("nav",{className:"navbar navbar-light",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(i.b,{to:"/",className:"navbar-brand",children:"Medium"}),Object(o.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.c,{to:"/",className:"navbar-link",exact:!0,children:"Home"})}),!1===t.isLoggedIn&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.c,{to:"/login",className:"navbar-link",children:"Sign in"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.c,{to:"/register",className:"navbar-link",children:"Sign up"})})]}),t.isLoggedIn&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(i.c,{to:"/articles/new",classname:"nav-link",children:[Object(o.jsx)("i",{className:"ion-compose"}),"\xa0 New Post"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(i.c,{to:"/profiles/".concat(t.currentUser.username),classname:"nav-link",children:[Object(o.jsx)("img",{className:"user-pic",src:t.currentUser.image,alt:""}),"\xa0 ",t.currentUser.username]})})]})]})]})})},p=function(e){var t=e.backendErrors,c=Object.keys(t).map((function(e){var c=t[e].join(" ");return"".concat(e," ").concat(c)}));return Object(o.jsx)("ul",{className:"error-messages",children:c.map((function(e){return Object(o.jsx)("li",{children:e},e)}))})},f=c(3),v=function(e){var t="/login"===e.match.path,c=t?"Sign In":"Sign Up",s=t?"/register":"/login",a=t?"Need an account?":"Have an account?",r=t?"/users/login":"/users",b=Object(n.useState)(""),d=Object(l.a)(b,2),O=d[0],x=d[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),N=v[0],k=v[1],S=Object(n.useState)(""),w=Object(l.a)(S,2),y=w[0],L=w[1],E=Object(n.useState)(!1),I=Object(l.a)(E,2),C=I[0],U=I[1],M=h(r),P=Object(l.a)(M,2),A=P[0],z=A.response,F=A.isLoading,H=A.error,J=P[1],B=m("token"),D=Object(l.a)(B,2)[1],R=Object(n.useContext)(j),T=Object(l.a)(R,2),W=T[0],q=T[1];return Object(n.useEffect)((function(){z&&(D(z.user.token),U(!0),q((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!0,isLoading:!1,currentUser:z.user})})))}),[z,D,q,W]),C?Object(o.jsx)(f.a,{to:"/"}):Object(o.jsx)("div",{className:"auth-page",children:Object(o.jsx)("div",{className:"container page",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(o.jsx)("div",{className:"text-xs-center",style:{fontSize:"30px",fontWeight:"bold"},children:c}),Object(o.jsx)("p",{className:"text-xs-center",children:Object(o.jsx)(i.b,{to:s,children:a})}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),J({method:"post",data:{user:t?{email:O,password:N}:{email:O,password:N,username:y}}})},children:[H&&Object(o.jsx)(p,{backendErrors:H.errors}),Object(o.jsxs)("fieldset",{children:[!t&&Object(o.jsx)("fieldset",{className:"form-group",children:Object(o.jsx)("input",{type:"text",className:"form-control form-control-lg ng-pristine ng-untouched ng-valid ng-empty ng-valid-email",placeholder:"Username",value:y,onChange:function(e){return L(e.target.value)}})}),Object(o.jsx)("fieldset",{className:"form-group",children:Object(o.jsx)("input",{type:"email",className:"form-control form-control-lg ng-pristine ng-untouched ng-valid ng-empty ng-valid-email",placeholder:"Email",value:O,onChange:function(e){return x(e.target.value)}})}),Object(o.jsx)("fieldset",{className:"form-group",children:Object(o.jsx)("input",{type:"password",className:"form-control form-control-lg ng-pristine ng-untouched ng-valid ng-empty ng-valid-email",placeholder:"Password",value:N,onChange:function(e){k(e.target.value)}})}),Object(o.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:F,children:c})]})]})]})})})})},N=function(e){var t=e.articles;return Object(o.jsx)("div",{children:t.map((function(e,t){return Object(o.jsxs)("div",{className:"article-preview",children:[Object(o.jsxs)("div",{className:"article-meta",children:[Object(o.jsx)(i.b,{to:"/profiles/".concat(e.author.username),children:Object(o.jsx)("img",{src:e.author.image,alt:""})}),Object(o.jsxs)("div",{className:"info",children:[Object(o.jsx)(i.b,{to:"/profiles/".concat(e.author.username),className:"author",children:e.author.username}),Object(o.jsx)("span",{className:"date",children:e.createdAt})]})]}),Object(o.jsxs)(i.b,{to:"/articles/".concat(e.slug),className:"preview-link",children:[Object(o.jsx)("h1",{children:e.title}),Object(o.jsx)("p",{children:e.title}),Object(o.jsx)("span",{children:"Read More..."}),Object(o.jsx)("ul",{className:"tag-list",children:e.tagList.map((function(e){}))})]})]},t)}))})},k=function(){var e=h("/articles?limit=10&offset=0"),t=Object(l.a)(e,2),c=t[0],s=c.response,a=c.isLoading,r=c.error,i=t[1];return console.log(s),Object(n.useEffect)((function(){i()}),[i]),Object(o.jsxs)("div",{className:"home-page",children:[Object(o.jsx)("div",{className:"banner",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{children:"Medium Clone"}),Object(o.jsx)("p",{children:"A place to share your hooks knowledge"})]})}),Object(o.jsx)("div",{className:"container page",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-9",children:[a&&Object(o.jsx)("div",{children:"Loading..."}),r&&Object(o.jsx)("div",{children:"Some error happened!"}),!a&&s&&Object(o.jsx)(N,{articles:s.articles})]}),Object(o.jsx)("div",{className:"col-md-3",children:"Popular tags"})]})})]})},S=function(){return Object(o.jsx)("div",{children:"Article"})},w=function(){return Object(o.jsxs)(f.d,{children:[Object(o.jsx)(f.b,{path:"/",component:k,exact:!0}),Object(o.jsx)(f.b,{path:"/articles/:slug",component:S}),Object(o.jsx)(f.b,{path:"/login",component:v}),Object(o.jsx)(f.b,{path:"/register",component:v})]})},y=(c(57),function(){return Object(o.jsx)(b,{children:Object(o.jsx)(x,{children:Object(o.jsx)("div",{children:Object(o.jsxs)(i.a,{children:[Object(o.jsx)(g,{}),Object(o.jsx)(w,{})]})})})})});r.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.e0c64dcf.chunk.js.map